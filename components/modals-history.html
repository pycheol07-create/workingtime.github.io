<div id="history-modal" class="fixed inset-0 bg-gray-900 bg-opacity-75 flex items-center justify-center hidden z-50 p-4">
    <div id="history-modal-content-box" class="bg-white rounded-2xl shadow-2xl w-[1400px] h-[880px] flex flex-col relative">

        <div id="history-modal-header" class="p-6 border-b border-gray-200 flex justify-between items-center cursor-move">
            <h2 class="text-xl font-bold text-gray-900">업무 이력 보기</h2>
            
            <button id="toggle-history-fullscreen-btn" class="modal-close-btn mr-10" title="전체화면">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M4 8V4m0 0h4M4 4l5 5m11-5h-4m0 0V4m0 0l-5 5M4 16v4m0 0h4m-4 0l5-5m11 5h-4m0 0v-4m0 0l-5-5" />
                </svg>
            </button>
            <button id="close-history-btn" class="modal-close-btn">&times;</button>
        </div>

        <div class="p-4 border-b border-gray-200 bg-gray-50 flex flex-wrap items-center gap-2">
            <label for="history-start-date" class="text-sm font-medium text-gray-700">시작일:</label>
            <input type="date" id="history-start-date" class="p-1.5 border border-gray-300 rounded-md shadow-sm text-sm">
            
            <label for="history-end-date" class="text-sm font-medium text-gray-700 ml-2">종료일:</label>
            <input type="date" id="history-end-date" class="p-1.5 border border-gray-300 rounded-md shadow-sm text-sm">
            
            <button id="history-filter-btn" class="bg-blue-600 hover:bg-blue-700 text-white font-semibold py-1.5 px-3 rounded-md text-sm ml-2">조회</button>
            <button id="history-clear-filter-btn" class="bg-gray-500 hover:bg-gray-600 text-white font-semibold py-1.5 px-3 rounded-md text-sm ml-1">초기화</button>

            <div class="flex-grow text-right">
                <button id="history-download-period-excel-btn" class="bg-green-600 hover:bg-green-700 text-white font-semibold py-1.5 px-3 rounded-md text-sm">선택기간 엑셀다운</button>
            </div>
        </div>
        <div class="px-6 pt-4 border-b border-gray-200 bg-gray-50">
            <div id="history-main-tabs" class="flex gap-6">
                <button data-main-tab="work" class="history-main-tab-btn py-3 font-semibold text-blue-600 border-b-2 border-blue-600">업무 이력</button>
                <button data-main-tab="attendance" class="history-main-tab-btn py-3 font-medium text-gray-500">근태 이력</button>
                <button data-main-tab="trends" class="history-main-tab-btn py-3 font-medium text-gray-500">📈 트렌드 분석</button>
                <button data-main-tab="report" class="history-main-tab-btn py-3 font-medium text-gray-500">📊 업무 리포트</button>
            </div>
        </div>
        <div class="flex-grow flex overflow-hidden">
            <div id="history-date-list-container" class="w-1/4 border-r border-gray-200 overflow-y-auto bg-gray-50">
                <ul id="history-date-list" class="p-2"></ul>
            </div>
            <div class="w-3/4 flex flex-col overflow-hidden">
                <div id="work-history-panel" class="flex flex-col h-full">
                    <div class="p-4 border-b border-gray-200 flex-shrink-0">
                        <div id="history-tabs" class="flex gap-4">
                            <button data-view="daily" class="history-tab-btn pb-2">일별 상세</button>
                            <button data-view="weekly" class="history-tab-btn pb-2">주별 요약</button>
                            <button data-view="monthly" class="history-tab-btn pb-2">월별 요약</button>
                        </div>
                    </div>
                    <div id="history-view-container" class="p-6 overflow-y-auto bg-gray-50 flex-grow">
                        <div id="history-daily-view" class="hidden"></div>
                        <div id="history-weekly-view" class="hidden space-y-6"></div>
                        <div id="history-monthly-view" class="hidden space-y-6"></div>
                    </div>
                </div>
                <div id="attendance-history-panel" class="hidden flex flex-col h-full">
                    <div class="p-4 border-b border-gray-200 flex-shrink-0">
                        <div id="attendance-history-tabs" class="flex gap-4">
                            <button data-view="attendance-daily" class="attendance-history-tab-btn pb-2">일별 상세</button>
                            <button data-view="attendance-weekly" class="attendance-history-tab-btn pb-2">주별 요약</button>
                            <button data-view="attendance-monthly" class="attendance-history-tab-btn pb-2">월별 요약</button>
                        </div>
                    </div>
                    <div id="attendance-history-view-container" class="p-6 overflow-y-auto bg-gray-50 flex-grow">
                        <div id="history-attendance-daily-view" class="hidden space-y-4"></div>
                        <div id="history-attendance-weekly-view" class="hidden space-y-4"></div>
                        <div id="history-attendance-monthly-view" class="hidden space-y-4"></div>
                    </div>
                </div>

                <div id="trend-analysis-panel" class="hidden flex flex-col h-full p-6 overflow-y-auto bg-gray-50 space-y-8">
                    <div>
                        <h3 class="text-xl font-bold mb-4 text-gray-800">주요 지표 트렌드 (최근 30일)</h3>
                        <div class="bg-white p-4 rounded-lg shadow-sm mb-6">
                            <h4 class="text-lg font-semibold text-gray-700 mb-2">📊 분당 평균 처리량 (개/분)</h4>
                            <div class="h-64"><canvas id="kpi-chart-throughput"></canvas></div>
                        </div>
                        <div class="bg-white p-4 rounded-lg shadow-sm mb-6">
                            <h4 class="text-lg font-semibold text-gray-700 mb-2">💰 개당 평균 처리비용 (원/개)</h4>
                            <div class="h-64"><canvas id="kpi-chart-cost"></canvas></div>
                        </div>
                        <div class="bg-white p-4 rounded-lg shadow-sm">
                            <h4 class="text-lg font-semibold text-gray-700 mb-2">⏳ 총 비업무시간 (분)</h4>
                            <div class="h-64"><canvas id="kpi-chart-nonwork"></canvas></div>
                        </div>
                    </div>
                </div>
                
                <div id="report-panel" class="hidden flex flex-col h-full">
                    <div class="p-4 border-b border-gray-200 flex-shrink-0">
                        <div id="report-tabs" class="flex gap-4">
                            <button data-view="report-daily" class="report-tab-btn pb-2 font-semibold text-blue-600 border-blue-600 border-b-2">일별 리포트</button>
                            <button data-view="report-weekly" class="report-tab-btn pb-2 text-gray-500">주별 리포트</button>
                            <button data-view="report-monthly" class="report-tab-btn pb-2 text-gray-500">월별 리포트</button>
                            <button data-view="report-yearly" class="report-tab-btn pb-2 text-gray-500">연간 리포트</button>
                        </div>
                    </div>
                    <div id="report-view-container" class="p-6 overflow-y-auto bg-gray-50 flex-grow">
                        <div id="report-daily-view" class=""></div>
                        <div id="report-weekly-view" class="hidden space-y-6"></div>
                        <div id="report-monthly-view" class="hidden space-y-6"></div>
                        <div id="report-yearly-view" class="hidden space-y-6"></div>
                    </div>
                </div>
            </div>
        </div>

        <div id="delete-history-modal" class="fixed inset-0 bg-gray-900 bg-opacity-75 flex items-center justify-center hidden z-[60] p-4">
            <div class="bg-white rounded-2xl shadow-2xl w-full max-w-sm relative"><button class="modal-close-btn">&times;</button>
                <div class="p-6 text-center">
                    <svg class="mx-auto mb-4 text-gray-400 w-12 h-12" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 20 20"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 11V6m0 8h.01M19 10a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"/></svg>
                    <h3 class="mb-5 text-lg font-normal text-gray-700">정말로 이 날짜의 모든 기록을 삭제하시겠습니까?</h3>
                    <p class="mb-6 text-sm text-gray-500">이 작업은 되돌릴 수 없습니다.</p>
                    <button type="button" id="confirm-history-delete-btn" class="text-white bg-red-600 hover:bg-red-700 focus:ring-4 focus:outline-none focus:ring-red-800 font-medium rounded-lg text-sm inline-flex items-center px-5 py-2.5 text-center mr-2">예, 삭제합니다</button>
                    <button type="button" id="cancel-history-delete-btn" class="text-gray-700 bg-white hover:bg-gray-100 focus:ring-4 focus:outline-none focus:ring-gray-200 rounded-lg border border-gray-200 text-sm font-medium px-5 py-2.5 hover:text-gray-900 focus:z-10">아니요, 취소합니다</button>
                </div>
            </div>
        </div>

    </div>
</div>